"use strict";function test(){alert("test"),alert("test2")}function getElement(a){return el.find('[data-id="'+a.id+'"]')}function addTodo(a){var b='<li class="page-header checkbox" data-id="'+a.id+'"><label><input type="checkbox" name="done">'+a.text+'</label><a href="javascript://" class="pull-right delete"><span class="glyphicon glyphicon-remove"></span></a></li>';el.find(".todos").append(b),updateTodo(a)}function removeTodo(a){getElement(a).remove()}function updateTodo(a){var b=getElement(a),c=b.find('[name="done"]').removeAttr("disabled");b.toggleClass("done",a.complete),c.prop("checked",a.complete)}!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.feathers=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],2:[function(a,b,c){function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],3:[function(a,b,c){function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],4:[function(a,b,c){c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":2,"./encode":3}],5:[function(a,b,c){function d(a,b){return j[a](b)}c["default"]=d,Object.defineProperty(c,"__esModule",{value:!0});var e=function(){};c.noop=e;var f=function(a){var b=a[a.length-1];return"function"==typeof b?b:e},g=function(a,b){return"object"==typeof a[b]?a[b]:{}},h=function(a){return function(b){var c=b[0],d=b[1],e=f(b),h=g(b,2);if("function"==typeof c)throw new Error("First parameter for '"+a+"' can not be a function");if("object"!=typeof d)throw new Error("No data provided for '"+a+"'");if(b.length>4)throw new Error("Too many arguments for '"+a+"' service method");return[c,d,h,e]}},i=function(a){return function(b){var c=b[0],d=g(b,1),e=f(b);if(b.length>3)throw new Error("Too many arguments for '"+a+"' service method");if("function"===c)throw new Error("First parameter for '"+a+"' can not be a function");return[c,d,e]}},j={find:function(a){var b=f(a),c=g(a,0);if(a.length>2)throw new Error("Too many arguments for 'find' service method");return[c,b]},create:function(a){var b=a[0],c=g(a,1),d=f(a);if("object"!=typeof b)throw new Error("First parameter for 'create' must be an object");if(a.length>3)throw new Error("Too many arguments for 'create' service method");return[b,c,d]},update:h("update"),patch:h("patch"),get:i("get"),remove:i("remove")};c.converters=j},{}],6:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(){var a=arguments.length<=0||void 0===arguments[0]?"/":arguments[0];return new n(a)}var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Client=void 0;var i=a("./utils"),j=a("./rest"),k=d(j),l=a("./sockets"),m=d(l),n=c.Client=function(){function a(b){e(this,a),this.base=b,this.services={}}return h(a,[{key:"configure",value:function(a){return a.call(this),this}},{key:"service",value:function(a){return a=(0,i.stripSlashes)(a),this.services[a]||(this.services[a]=new this.Service(a,this)),this.services[a]}}]),a}();g(f,k["default"],m["default"]),c["default"]=b.exports=f},{"./rest":8,"./sockets":13,"./utils":14}],7:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){return"function"==typeof b&&a.then(function(a){return b(null,a)},b),a}var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Base=void 0;var i=a("querystring"),j=d(i),k=a("../utils");c.Base=function(){function a(b,c){e(this,a),this.name=(0,k.stripSlashes)(b),this.options=g({},c),this.connection=c.connection,this.base=c.base+"/"+this.name,delete this.options.base,(0,k.normalize)(this),(0,k.makeEmitting)(this)}return h(a,[{key:"makeUrl",value:function(a,b){var c=this.base;if("undefined"!=typeof b&&(c+="/"+b),0!==Object.keys(a).length){var d=j["default"].stringify(a);c+="?"+d}return c}},{key:"find",value:function(a,b){return f(this.request({url:this.makeUrl(a),method:"GET"}),b)}},{key:"get",value:function(a,b,c){return f(this.request({url:this.makeUrl(b,a),method:"GET"}),c)}},{key:"create",value:function(a,b,c){return f(this.request({url:this.makeUrl(b),body:a,method:"POST"}),c)}},{key:"update",value:function(a,b,c,d){return f(this.request({url:this.makeUrl(c,a),body:b,method:"PUT"}),d)}},{key:"patch",value:function(a,b,c,d){return f(this.request({url:this.makeUrl(c,a),body:b,method:"PATCH"}),d)}},{key:"remove",value:function(a,b,c){return f(this.request({url:this.makeUrl(b,a),method:"DELETE"}),c)}}]),a}()},{"../utils":14,querystring:4}],8:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./jquery"),f=d(e),g=a("./request"),h=d(g),i=a("./superagent"),j=d(i);c["default"]={jquery:f["default"],request:h["default"],superagent:j["default"]}},{"./jquery":9,"./request":10,"./superagent":11}],9:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Service=void 0,c["default"]=function(a){if(a||"undefined"==typeof window||(a=window.jQuery),"function"!=typeof a)throw new Error("jQuery instance needs to be provided");return function(){this.Service=j,this.connection=a}};var i=a("./base"),j=c.Service=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,[{key:"request",value:function(a){var b=this,c=g({dataType:a.type||"json"},a);return a.body&&(c.data=JSON.stringify(a.body),c.contentType="application/json"),delete c.type,delete c.body,new Promise(function(a,d){return b.connection.ajax(c).then(a,function(a){var b=new Error(a.responseText);b.xhr=a,d(b)})})}}]),b}(i.Base)},{"./base":7}],10:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Service=void 0,c["default"]=function(a){if(!a)throw new Error("request instance needs to be provided");return function(){this.Service=j,this.connection=a}};var i=a("./base"),j=c.Service=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,[{key:"request",value:function(a){var b=this;return new Promise(function(c,d){b.connection(g({json:!0},a),function(a,b,e){return!a&&b.statusCode>=400?d(new Error(e)):void c(e)})})}}]),b}(i.Base)},{"./base":7}],11:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Service=void 0,c["default"]=function(a){if(!a)throw new Error("Superagent needs to be provided");return function(){this.Service=i,this.connection=a}};var h=a("./base"),i=c.Service=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),g(b,[{key:"request",value:function(a){var b=this.connection(a.method,a.url).type(a.type||"json");return new Promise(function(c,d){a.body&&b.send(a.body),b.end(function(a,b){return a?d(a):void c(b&&b.body)})})}}]),b}(h.Base)},{"./base":7}],12:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Service=void 0;var f=a("../utils"),g=c.Service=function(){function a(b,c){d(this,a),this.events=f.events,this.path=(0,f.stripSlashes)(b),this.connection=c.connection,this.method=this.connection&&this.connection.io?"emit":"send",(0,f.normalize)(this)}return e(a,[{key:"emit",value:function(){var a;(a=this.connection)[this.method].apply(a,arguments)}}]),a}(),h=["on","once","off"];h.forEach(function(a){g.prototype[a]=function(b,c){this.connection[a](this.path+" "+b,c)}}),f.methods.forEach(function(a){g.prototype[a]=function(){for(var b=this,c=arguments.length,d=Array(c),e=0;c>e;e++)d[e]=arguments[e];var f=null;return"function"==typeof d[d.length-1]&&(f=d.pop()),new Promise(function(c,e){var g;d.unshift(b.path+"::"+a),d.push(function(a,b){return f&&f(a,b),a?e(a):c(b)}),(g=b.connection)[b.method].apply(g,d)})}})},{"../utils":14}],13:[function(a,b,c){function d(a){if(!a)throw new Error("No socket provided");return function(){this.Service=f.Service,this.connection=a}}function e(a){return"undefined"!=typeof window&&window.io&&"string"==typeof a&&(a=window.io(a)),d(a)}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./base");c["default"]={socketio:e,primus:d}},{"./base":12}],14:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return a.replace(/^\/|\/$/g,"")}function f(a){h(a,i.EventEmitter.prototype),Object.keys(m).forEach(function(b){var c=a[b],d=m[b];"function"==typeof c&&(a[b]=function(){for(var a=this,b=arguments.length,e=Array(b),f=0;b>f;f++)e[f]=arguments[f];var g=c.apply(this,e);return g.then(function(b){return a.emit(d,b),b})})})}function g(a){l.forEach(function(b){var c=a[b];"function"==typeof c&&(a[b]=function(){for(var a=arguments.length,d=Array(a),e=0;a>e;e++)d[e]=arguments[e];return c.apply(this,(0,k["default"])(b,d))})})}var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};Object.defineProperty(c,"__esModule",{value:!0}),c.events=c.eventMappings=c.methods=void 0,c.stripSlashes=e,c.makeEmitting=f,c.normalize=g;var i=a("events"),j=a("feathers-commons/lib/arguments"),k=d(j),l=c.methods=["find","get","create","update","patch","remove"],m=c.eventMappings={create:"created",update:"updated",patch:"patched",remove:"removed"};c.events=Object.keys(m).map(function(a){return m[a]})},{events:1,"feathers-commons/lib/arguments":5}]},{},[6])(6)});var el=$("#todos"),socket=io(),app=feathers().configure(feathers.socketio(socket)),todos=app.service("todos");todos.on("updated",updateTodo),todos.on("removed",removeTodo),todos.on("created",addTodo),todos.find(function(a,b){b.forEach(addTodo)}),el.on("submit","form",function(a){var b=$(this).find('[name="description"]');todos.create({text:b.val(),complete:!1}),b.val(""),a.preventDefault()}),el.on("click",".delete",function(a){var b=$(this).parents("li").data("id");todos.remove(b),a.preventDefault()}),el.on("click",'[name="done"]',function(a){var b=$(this).parents("li").data("id");$(this).attr("disabled","disabled"),todos.update(b,{complete:$(this).is(":checked")})});