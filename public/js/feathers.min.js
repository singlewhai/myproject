!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.feathers=e()}}(function(){return function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,a,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],u(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),a=1;r>a;a++)i[a-1]=arguments[a];n.apply(this,i)}else if(s(n)){for(r=arguments.length,i=new Array(r-1),a=1;r>a;a++)i[a-1]=arguments[a];for(c=n.slice(),r=c.length,a=0;r>a;a++)c[a].apply(this,i)}return!0},r.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var n;n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,u;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(u=i;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],o(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?o(e._events[t])?1:e._events[t].length:0}},{}],2:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,i){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var u=/\+/g;e=e.split(t);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var c=e.length;a>0&&c>a&&(c=a);for(var f=0;c>f;++f){var l,h,p,v,d=e[f].replace(u,"%20"),y=d.indexOf(n);y>=0?(l=d.substr(0,y),h=d.substr(y+1)):(l=d,h=""),p=decodeURIComponent(l),v=decodeURIComponent(h),r(s,p)?o(s[p])?s[p].push(v):s[p]=[s[p],v]:s[p]=v}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],3:[function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,u){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(s(e),function(s){var u=encodeURIComponent(o(s))+n;return i(e[s])?r(e[s],function(e){return u+encodeURIComponent(o(e))}).join(t):u+encodeURIComponent(o(e[s]))}).join(t):u?encodeURIComponent(o(u))+n+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],4:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":2,"./encode":3}],5:[function(e,t,n){"use strict";function r(e,t){return c[e](t)}n["default"]=r,Object.defineProperty(n,"__esModule",{value:!0});var o=function(){};n.noop=o;var i=function(e){var t=e[e.length-1];return"function"==typeof t?t:o},s=function(e,t){return"object"==typeof e[t]?e[t]:{}},u=function(e){return function(t){var n=t[0],r=t[1],o=i(t),u=s(t,2);if("function"==typeof n)throw new Error("First parameter for '"+e+"' can not be a function");if("object"!=typeof r)throw new Error("No data provided for '"+e+"'");if(t.length>4)throw new Error("Too many arguments for '"+e+"' service method");return[n,r,u,o]}},a=function(e){return function(t){var n=t[0],r=s(t,1),o=i(t);if(t.length>3)throw new Error("Too many arguments for '"+e+"' service method");if("function"===n)throw new Error("First parameter for '"+e+"' can not be a function");return[n,r,o]}},c={find:function(e){var t=i(e),n=s(e,0);if(e.length>2)throw new Error("Too many arguments for 'find' service method");return[n,t]},create:function(e){var t=e[0],n=s(e,1),r=i(e);if("object"!=typeof t)throw new Error("First parameter for 'create' must be an object");if(e.length>3)throw new Error("Too many arguments for 'create' service method");return[t,n,r]},update:u("update"),patch:u("patch"),get:a("get"),remove:a("remove")};n.converters=c},{}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=arguments.length<=0||void 0===arguments[0]?"/":arguments[0];return new p(e)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0}),n.Client=void 0;var a=e("./utils"),c=e("./rest"),f=r(c),l=e("./sockets"),h=r(l),p=n.Client=function(){function e(t){o(this,e),this.base=t,this.services={}}return u(e,[{key:"configure",value:function(e){return e.call(this),this}},{key:"service",value:function(e){return e=(0,a.stripSlashes)(e),this.services[e]||(this.services[e]=new this.Service(e,this)),this.services[e]}}]),e}();s(i,f["default"],h["default"]),n["default"]=t.exports=i},{"./rest":8,"./sockets":13,"./utils":14}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return"function"==typeof t&&e.then(function(e){return t(null,e)},t),e}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0}),n.Base=void 0;var a=e("querystring"),c=r(a),f=e("../utils");n.Base=function(){function e(t,n){o(this,e),this.name=(0,f.stripSlashes)(t),this.options=s({},n),this.connection=n.connection,this.base=n.base+"/"+this.name,delete this.options.base,(0,f.normalize)(this),(0,f.makeEmitting)(this)}return u(e,[{key:"makeUrl",value:function(e,t){var n=this.base;if("undefined"!=typeof t&&(n+="/"+t),0!==Object.keys(e).length){var r=c["default"].stringify(e);n+="?"+r}return n}},{key:"find",value:function(e,t){return i(this.request({url:this.makeUrl(e),method:"GET"}),t)}},{key:"get",value:function(e,t,n){return i(this.request({url:this.makeUrl(t,e),method:"GET"}),n)}},{key:"create",value:function(e,t,n){return i(this.request({url:this.makeUrl(t),body:e,method:"POST"}),n)}},{key:"update",value:function(e,t,n,r){return i(this.request({url:this.makeUrl(n,e),body:t,method:"PUT"}),r)}},{key:"patch",value:function(e,t,n,r){return i(this.request({url:this.makeUrl(n,e),body:t,method:"PATCH"}),r)}},{key:"remove",value:function(e,t,n){return i(this.request({url:this.makeUrl(t,e),method:"DELETE"}),n)}}]),e}()},{"../utils":14,querystring:4}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./jquery"),i=r(o),s=e("./request"),u=r(s),a=e("./superagent"),c=r(a);n["default"]={jquery:i["default"],request:u["default"],superagent:c["default"]}},{"./jquery":9,"./request":10,"./superagent":11}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0}),n.Service=void 0,n["default"]=function(e){if(e||"undefined"==typeof window||(e=window.jQuery),"function"!=typeof e)throw new Error("jQuery instance needs to be provided");return function(){this.Service=c,this.connection=e}};var a=e("./base"),c=n.Service=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),u(t,[{key:"request",value:function(e){var t=this,n=s({dataType:e.type||"json"},e);return e.body&&(n.data=JSON.stringify(e.body),n.contentType="application/json"),delete n.type,delete n.body,new Promise(function(e,r){return t.connection.ajax(n).then(e,function(e){var t=new Error(e.responseText);t.xhr=e,r(t)})})}}]),t}(a.Base)},{"./base":7}],10:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0}),n.Service=void 0,n["default"]=function(e){if(!e)throw new Error("request instance needs to be provided");return function(){this.Service=c,this.connection=e}};var a=e("./base"),c=n.Service=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),u(t,[{key:"request",value:function(e){var t=this;return new Promise(function(n,r){t.connection(s({json:!0},e),function(e,t,o){return!e&&t.statusCode>=400?r(new Error(o)):void n(o)})})}}]),t}(a.Base)},{"./base":7}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0}),n.Service=void 0,n["default"]=function(e){if(!e)throw new Error("Superagent needs to be provided");return function(){this.Service=a,this.connection=e}};var u=e("./base"),a=n.Service=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),s(t,[{key:"request",value:function(e){var t=this.connection(e.method,e.url).type(e.type||"json");return new Promise(function(n,r){e.body&&t.send(e.body),t.end(function(e,t){return e?r(e):void n(t&&t.body)})})}}]),t}(u.Base)},{"./base":7}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0}),n.Service=void 0;var i=e("../utils"),s=n.Service=function(){function e(t,n){r(this,e),this.events=i.events,this.path=(0,i.stripSlashes)(t),this.connection=n.connection,this.method=this.connection&&this.connection.io?"emit":"send",(0,i.normalize)(this)}return o(e,[{key:"emit",value:function(){var e;(e=this.connection)[this.method].apply(e,arguments)}}]),e}(),u=["on","once","off"];u.forEach(function(e){s.prototype[e]=function(t,n){this.connection[e](this.path+" "+t,n)}}),i.methods.forEach(function(e){s.prototype[e]=function(){for(var t=this,n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var i=null;return"function"==typeof r[r.length-1]&&(i=r.pop()),new Promise(function(n,o){var s;r.unshift(t.path+"::"+e),r.push(function(e,t){return i&&i(e,t),e?o(e):n(t)}),(s=t.connection)[t.method].apply(s,r)})}})},{"../utils":14}],13:[function(e,t,n){"use strict";function r(e){if(!e)throw new Error("No socket provided");return function(){this.Service=i.Service,this.connection=e}}function o(e){return"undefined"!=typeof window&&window.io&&"string"==typeof e&&(e=window.io(e)),r(e)}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./base");n["default"]={socketio:o,primus:r}},{"./base":12}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e.replace(/^\/|\/$/g,"")}function i(e){u(e,a.EventEmitter.prototype),Object.keys(h).forEach(function(t){var n=e[t],r=h[t];"function"==typeof n&&(e[t]=function(){for(var e=this,t=arguments.length,o=Array(t),i=0;t>i;i++)o[i]=arguments[i];var s=n.apply(this,o);return s.then(function(t){return e.emit(r,t),t})})})}function s(e){l.forEach(function(t){var n=e[t];"function"==typeof n&&(e[t]=function(){for(var e=arguments.length,r=Array(e),o=0;e>o;o++)r[o]=arguments[o];return n.apply(this,(0,f["default"])(t,r))})})}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Object.defineProperty(n,"__esModule",{value:!0}),n.events=n.eventMappings=n.methods=void 0,n.stripSlashes=o,n.makeEmitting=i,n.normalize=s;var a=e("events"),c=e("feathers-commons/lib/arguments"),f=r(c),l=n.methods=["find","get","create","update","patch","remove"],h=n.eventMappings={create:"created",update:"updated",patch:"patched",remove:"removed"};n.events=Object.keys(h).map(function(e){return h[e]})},{events:1,"feathers-commons/lib/arguments":5}]},{},[6])(6)});
