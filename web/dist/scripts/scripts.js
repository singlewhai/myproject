var hosts={"localhost:3000":"local","staging.walkingpenguins.com":"staging","walkingpenguins.com":"production","walkingpenguins.com":"roadhouse"},server_uris={local:"localhost:3000",staging:"staging.walkingpenguins.com",production:"walkingpenguins.com",roadhouse:"walkingpenguins.com"},current_environment=!1,cert="cert/public.key.pem",app_server="";hosts.hasOwnProperty(window.location.host)&&(current_environment=hosts[window.location.host]),app_server="//"+server_uris[current_environment];var app=angular.module("app",["ui.router","snap","ngAnimate","cgBusy","ngCookies","appServices"]);app.server=app_server,app.value("cgBusyDefaults",{message:"loagind..."}),app.factory("httpInterceptor",["$q","$location","$rootScope","$cookieStore",function(e,t,r,o){"use strict";return{request:function(e){return e.headers=e.headers||{},e.headers.penguin_access_token=o.get("penguin_access_token"),e},responseError:function(o){return 400===o.status?t.path("/400"):401===o.status?(r.clearVars(),t.path("/")):404===o.status?t.path("/404"):500===o.status&&t.path("/500"),e.reject(o)}}}]),app.config(["$stateProvider","$urlRouterProvider","$httpProvider",function(e,t,r){r.defaults.useXDomain=!0,delete r.defaults.headers.common["X-Requested-With"],r.interceptors.push("httpInterceptor"),t.when("/dashboard","/dashboard/overview"),t.otherwise("/home"),e.state("base",{"abstract":!0,url:"",templateUrl:"views/base.html"}).state("home",{url:"/home",parent:"base",templateUrl:"views/home.html",controller:"loginController"}).state("dashboard",{url:"/dashboard",parent:"base",templateUrl:"views/dashboard.html",controller:"DashboardCtrl"}).state("overview",{url:"/overview",parent:"dashboard",templateUrl:"views/dashboard/overview.html"}).state("reports",{url:"/reports",parent:"dashboard",templateUrl:"views/dashboard/reports.html"})}]),app.run(["$rootScope","$location","$cookieStore","$window","Logout",function(e,t,r,o,a){"use strict";e.populateVars=function(){try{e.logged_in=r.get("logged_in"),e.is_admin=r.get("is_admin"),e.roles=r.get("roles"),e.username=r.get("username")}catch(o){e.clearVars(),t.path("/login")}},e.clearVars=function(){r.put("auth",""),r.put("logged_in",!1),r.put("is_admin",!1),r.put("roles",[]),r.put("username",""),e.populateVars()},e.populateVars(),e.logout=function(){a.logout({},{username:r.get("username")},function(r){e.clearVars(),t.path("/")},function(e){})}}]),angular.module("app").controller("loginController",["$scope","$location","Default",function(e,t,r){r.init({},{},function(e){alert(e)}),e.submit=function(){return t.path("/dashboard"),!1}}]),angular.module("app").controller("DashboardCtrl",["$scope","$state",function(e,t){e.$state=t}]);var appServices=angular.module("appServices",["ngResource"]);appServices.factory("Default",["$resource",function(e){"use strict";return e(app_server+"/api/init",{},{init:{method:"GET",isArray:!1}})}]),appServices.factory("Logout",["$resource",function(e){"use strict";return e(app_server+"/auth/signout",{},{logout:{method:"GET",isArray:!1}})}]),$(window).scroll(function(){$(".navbar").offset().top>50?$(".navbar-fixed-top").addClass("top-nav-collapse"):$(".navbar-fixed-top").removeClass("top-nav-collapse")}),$(function(){$("a.page-scroll").bind("click",function(e){var t=$(this);$("html, body").stop().animate({scrollTop:$(t.attr("href")).offset().top},1500,"easeInOutExpo"),e.preventDefault()})});